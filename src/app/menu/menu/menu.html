<div class="menu-wrapper">
  <!-- التبويبات -->
  <div class="tabs">
    <button [class.active]="activeTab === 'addCategory'" (click)="activeTab = 'addCategory'">إضافة فئة</button>
    <button [class.active]="activeTab === 'addItem'" (click)="activeTab = 'addItem'">إضافة عنصر</button>
    <button [class.active]="activeTab === 'viewAll'" (click)="activeTab = 'viewAll'">عرض الكل</button>
  </div>

  <!-- تبويب: إضافة فئة -->
  <div *ngIf="activeTab === 'addCategory'" class="tab-content">
    <h3>إضافة فئة جديدة</h3>
    <input type="text" placeholder="اسم الفئة" [(ngModel)]="newCategoryName" />
    <input type="text" placeholder="رابط صورة الفئة" [(ngModel)]="newCategoryImage" />
    <button (click)="addCategory()">إضافة الفئة</button>

    <!-- كروت الفئات -->
    <div class="category-cards">
      <div
        class="category-card"
        *ngFor="let cat of categories"
        (click)="toggleCategoryItems(cat.name)"
        [class.active]="cat.name === selectedCategoryForView"
      >
        <img *ngIf="cat.image" [src]="cat.image" alt="صورة" />
        <span>{{ cat.name }}</span>
        <button class="delete-btn" (click)="askDeleteCategory($event, cat.name)">×</button>
      </div>
    </div>

    <!-- العناصر الخاصة بالفئة المختارة -->
    <div *ngIf="selectedCategoryForView" class="items-card-wrapper">
      <h4>العناصر داخل: {{ selectedCategoryForView }}</h4>
      <div class="items-grid">
        <div class="item-card" *ngFor="let item of getItemsByCategory(selectedCategoryForView)">
          <h5>{{ item.name }}</h5>
          <p>{{ item.price }} ج.م</p>
          <button class="delete-btn1" (click)="askDeleteItem(item)">حذف</button>
        </div>
      </div>
    </div>
  </div>

  <!-- تبويب: إضافة عنصر -->
  <div *ngIf="activeTab === 'addItem'" class="tab-content">
    <h3>إضافة عنصر جديد</h3>
    <input type="text" placeholder="اسم العنصر" [(ngModel)]="newItem.name" />
    <input type="number" placeholder="السعر" [(ngModel)]="newItem.price" />
    <select [(ngModel)]="newItem.category">
      <option *ngFor="let cat of categories" [value]="cat.name">{{ cat.name }}</option>
    </select>
    <button (click)="addItem()">إضافة العنصر</button>
  </div>

  <!-- تبويب: عرض الكل -->
  <div *ngIf="activeTab === 'viewAll'" class="tab-content">
    <div *ngFor="let cat of categories" class="category-section">
      <h4>{{ cat.name }}</h4>
      <div class="items-grid">
        <div class="item-card" *ngFor="let item of getItemsByCategory(cat.name)">
          <h5>{{ item.name }}</h5>
          <p>{{ item.price }} ج.م</p>
          <button class="delete-btn1" (click)="askDeleteItem(item)">حذف</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Popup Confirm Modal -->
  <div class="modal-overlay" *ngIf="showConfirmModal">
    <div class="modal-box">
      <h4>{{ confirmTitle }}</h4>
      <p>{{ confirmMessage }}</p>
      <div class="modal-actions">
        <button class="btn btn-danger" (click)="confirm(true)">نعم</button>
        <button class="btn btn-secondary" (click)="confirm(false)">إلغاء</button>
      </div>
    </div>
  </div>
</div>
